<img class="wood-header" src="http://res.cloudinary.com/lejipni8p/image/upload/c_crop,g_east,h_514,w_3754/v1482867039/earth%20house/wood-banner_rbetwp.jpg">

<div class="cart-edit" ng-if="!$ctrl.confirmCart">
    <h2>Shopping Cart</h2>
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Sub total</th>
            </tr>
        </thead>

        <tbody>
            <tr ng-repeat="item in $ctrl.items">
                <td>
                    {{item.name}}
                </td>
                <td>
                    ${{item.price}}.00
                </td>
                <td>
                    <select ng-model="item.quantity">
                        <option ng-value="item.quantity">
                            {{item.quantity}}
                        </option>
                        <option ng-value="number" ng-repeat="number in $ctrl.selectArray">
                            {{number}}
                        </option>
                    </select>
                    <button ng-click="$ctrl.updateCart(item, item.quantity)">Update</button>
                    <span class="remove-item" ng-click="$ctrl.removeItem(item)">x remove-item</span>
                </td>
                <td>${{item.subTotal}}.00</td>
            </tr>
        </tbody>

        <tfoot>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td>Total: ${{$ctrl.total}}.00</td>
            </tr>
        </tfoot>
    </table>
    <button ng-click="$ctrl.confirmCart = true; $ctrl.showAddressForm = true">Confirm Cart</button>
</div>

<div class="cart" ng-if="$ctrl.confirmCart">
    <h2>Your Order</h2>
    <p ng-click="$ctrl.confirmCart = false">edit</p>
    <table>
        <tr ng-repeat="item in $ctrl.items">
            <td>{{item.name}}</td>
            <td>x</td>
            <td>{{item.quantity}}</td>
            <td>${{item.price * item.quantity}}.00</td>
        </tr>
    </table>
    <hr>
    <tfoot>${{$ctrl.total}}.00</tfoot>
</div>

<div class="checkoutInfo" ng-if="$ctrl.showAddressForm">
    <h2>Delivery Info</h2>

    <form name="address-form" ng-submit="$ctrl.showPaymentDiv(); $ctrl.showAddressForm = false">
        <h4>Name for order</h4>
        <input placeholder="first name" ng-model="$ctrl.address.firstName" required>
        <input placeholder="last name" ng-model="$ctrl.address.lastName" required>

        <h4>Adress for delivery</h4>
        <input placeholder="street line 1" ng-model="$ctrl.address.line1" required>
        <input placeholder="street line 2" ng-model="$ctrl.address.line2">
        <select name="city" ng-model="$ctrl.address.city" required>
            <option></option>
            <option ng-repeat="city in $ctrl.cityArray" ng-value="city" ng-required="required">{{city}}</option>
        </select>
        <select name="state" ng-model="$ctrl.address.state" required>
            <option></option>
            <option value="Oregon">Oregon</option>
            <option value="Washington">Washington</option>
        </select>
        <input name="zip" placeholder="zip code" ng-model="$ctrl.address.zip" required>
        <button type="submit">Checkout</button>
    </form>
</div>


<div class="payment" ng-show="$ctrl.showPayment && !$ctrl.showAddressForm">
    <div class="address-table">
        <h3>Delivery Info</h3>
        <p ng-click="$ctrl.showAddressForm = true">edit</p>
        
        <h5>name:</h5>
        <p>{{$ctrl.address.firstName}} {{$ctrl.address.lastName}}<p>

        <h5>address</h5>
        <p><span>line 1: </span>{{$ctrl.address.line1}}</p>
        <p><span>line 2: </span>{{$ctrl.address.line2}}</p>
        <p>{{$ctrl.address.city}}, ${{$ctrl.address.state}} {{$ctrl.address.zip}}</p>
    </div>


    <h3>Payment Information</h3>
    <form stripe-form="stripeCallback" name="checkoutForm">
        <input ng-model="number" placeholder="Card Number" payments-format="card" payments-validate="card" name="card"/>
        <input ng-model="expiry" placeholder="Expiration" payments-formate="expiry" payments-validate="expiry" name="expiry"/>
        <input ng-model="cvc" placeholder="CVC" payments-format="cvc" payments-validate="cvc" name="cvc"/>
        <button type="submit">Submit</button>
    </form>

    <div ng-if="checkoutForm.card.$invalid">
        Error: invalid card number!
    </div>
</div>



